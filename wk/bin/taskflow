#!/usr/bin/env bash
set -e

TASKFLOW_DIR="$HOME/repos/bitbucket.wolterskluwer.io/scm/taskflow/wkapp-taskflow"
cd "$TASKFLOW_DIR"

CMD=$1
shift

exe() { echo "==> $@" ; $@ ; }

case $CMD in
  pull)
    exe "git tidy"
    ;;


  update)
    exe "yarn install"
    exe "yarn build"
    ;;


  start)
    exe "yarn gateway"
    exe "yarn start:dev"
    ;;


  *)
    if [[ -z "$CMD" ]]; then
      echo "USAGE: taskflow (update|start)"
      exit 0
    fi
    ;;
esac
