#!/bin/bash
# Returns a list of all unique production dependencies for the current node project.

set -e

if [[ ! -f package.json ]]; then
  echo "Not a node project"
  exit 1
fi

npm list --prod |
  head -n -2 |
  tail -n +2 |
  grep -v "UNMET DEPENDENCY" |
  sed 's/^[^a-zA-Z@]*\(.*\)@[0-9].*$/\1/' |
  sort |
  uniq
